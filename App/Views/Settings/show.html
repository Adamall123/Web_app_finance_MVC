{% extends "base.html" %}

{% block title %}Settings{% endblock %}


{% block footer %}
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script>
    
    $( document ).ready(function() {
        
        // $.ajax({
        //     type: 'GET',
        //     url: '/settings/display',
        //     dataType: 'JSON',
        //     success: function(response){
        //         var resultIncomesCategories ='';
        //         var resultExpenseCategories ='';
        //         var resultPaymentMethodCategories ='';
        //         var container = $('')
               
        //                 $.each(response.getIncomesCategoryAssignedToUser, function (i, val) {
        //                     container.append(val)
        //                     resultIncomesCategories += "<li>" + val['name'] +  "<div class = 'editDeleteSpanIncome'><a href='#edit-income-modal" + val['id'] + "'data-toggle='modal'><i class='fas fa-pencil-alt edit btn'></i></a></div>" + "</li>";
        //                 })
        //               //  $('#incomes').html(resultIncomesCategories);     
        //                 $.each(response.getExpensesCategoryAssignedToUser, function (i, val) {
        //                     container.append(val)
        //                      resultExpenseCategories += "<li>" + val['name'] +  "</li>";
        //                 })
        //                // $('#expenses').html(resultExpenseCategories);    
        //                 $.each(response.getPaymentMethodsAssignedToUser, function (i, val) {
        //                     container.append(val)
        //                      resultPaymentMethodCategories += "<li>" + val['name'] +  "</li>";
        //                 })
        //                 //$('#paymentMethods').html(resultPaymentMethodCategories); 
        //     }
        // }) 
         
        $(".editDeleteSpanIncome").click(function () {
            var incomeId = $(this).attr('data-id');
            var income = $(this).attr('data-info-income'); 
            $('#form-edit-income').attr('action', 'edit-income?id=' + incomeId);
            $('#income_id').val(income);
        });
        $(".editDeleteSpanExpense").click(function () {
            var expenseId = $(this).attr('data-id');
            var expense = $(this).attr('data-info-expense'); 
            $('#form-edit-expense').attr('action', 'edit-expense?id=' + expenseId);
            $('#expense_id').val(expense);
        });
        $(".editDeleteSpanPaymentMethod").click(function () {
            var paymentMethodId = $(this).attr('data-id');
            var paymentMethod = $(this).attr('data-info-expense'); 
            $('#form-edit-payment-method').attr('action', 'edit-payment-method?id=' + paymentMethodId);
            $('#payment_method_id').val(paymentMethod);
        });
    });



 </script>
{% endblock %}

{% block body %}

   <h1>Settings</h1>
   <dl class="dl-horizontal">
       <dt>Name</dt>
       <dd>{{ user.name }}</dd>
       <dt>Email</dt>
       <dd>{{ user.email }}</dd>
   </dl>
<a href="/settings/edit">Edit</a>

<div class="row">
    <div class="col-lg-4">
        <div class="Category" >
            <header >
                <div class="CategoryHeader">Incomes Categories</div>
            </header>
            <div class="CategoryColumn" id="incomes">
                <ul class="CategoryRow">
                   {% for getIncomeCategoryAssignedToUser in getIncomesCategoryAssignedToUser %}
                   {% if getIncomeCategoryAssignedToUser['name'] != defaultCategory %}
                   <li>
                            <div class = 'editDeleteSpanIncome' data-id="{{ getIncomeCategoryAssignedToUser['id'] }}" data-info-income="{{ getIncomeCategoryAssignedToUser['name'] }}">
                            {{ getIncomeCategoryAssignedToUser['name'] }} 
                            <a href="#edit-income-modal" data-toggle='modal' type="button">
                            <i class='fas fa-pencil-alt edit btn'></i></a></div>
                    </li>
                    {% endif %} 
                   {% endfor %}
                   <li> {{ defaultCategory }}</li>
                </ul>
            </div>
            <footer>
                <footer>
						<span><a  href="#add-new-income" data-toggle="modal" type="button" class="CategoryFooter">Add New Income</a></span>
					</footer>
                
            </footer>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="Category">
            <header>
                <div class="CategoryHeader">Expences Categories</div>
            </header>
            <div class="CategoryColumn" id="expenses">
                <ul class="CategoryRow">
                    {% for getExpenseCategoryAssignedToUser in getExpensesCategoryAssignedToUser %}
                    {% if getExpenseCategoryAssignedToUser['name'] != defaultCategory %}
                    <li>
                             <div class = 'editDeleteSpanExpense' data-id="{{ getExpenseCategoryAssignedToUser['id'] }}" data-info-expense="{{ getExpenseCategoryAssignedToUser['name'] }}">
                                {{ getExpenseCategoryAssignedToUser['name'] }} 
                             <a href="#edit-expense-modal" data-toggle='modal' type="button">
                             <i class='fas fa-pencil-alt edit btn'></i></a>
                            </div>
                     </li>
                     {% endif %} 
                    {% endfor %}
                    <li> {{ defaultCategory }}</li>
                </ul>
            </div>
            <footer>
                <span><a  href="#add-new-expence" data-toggle="modal" type="button" class="CategoryFooter">Add New Expence</a></span>
            </footer>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="Category">
            <header>
                <div class="CategoryHeader" >Payment Methods</div>
            </header>
            <div class="CategoryColumn" id="paymentMethods">
                <ul class="CategoryRow">
                    {% for getPaymentMethodAssignedToUser in getPaymentMethodsAssignedToUser %}
                    <li>
                             <div class = 'editDeleteSpanPaymentMethod' data-id="{{ getPaymentMethodAssignedToUser['id'] }}" data-info-expense="{{ getPaymentMethodAssignedToUser['name'] }}">
                            {{ getPaymentMethodAssignedToUser['name'] }} 
                            <a href="#edit-payment-method-modal" data-toggle='modal' type="button">
                             <i class='fas fa-pencil-alt edit btn'></i></a>
                             <a href="#delete-payment-method-modal" data-toggle="modal" ><i class='far fa-trash-alt'></i></a>
                            </div>
                             
                     </li>
                    {% endfor %}
                </ul>
                </div>
                 <footer>
                <span><a  href="#add-new-payment-method" data-toggle="modal" type="button" class="CategoryFooter">Add New Payment</a></span>
            </footer>
            </div>
        </div>
    </div>
</div>

{% endblock %}
